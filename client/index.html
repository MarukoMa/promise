<!DOCTYPE html>
<html lang="en">
<head>
   <meta charset="UTF-8" />
   <meta http-equiv="X-UA-Compatible" content="IE=edge" />
   <meta name="viewport" content="width=device-width, initial-scale=1.0" />
   <title>promise封装</title>
   <link rel="shortcut icon" href="http://www.suning.com/favicon.ico" type="image/x-icon" />
</head>
<body>
    <h1>promise封装</h1>
    <div id="showCont"></div>
    <script src="../lib/promise.js">
    </script>
    <script>
         let objectTest = new Promise((resolve, reject) => {
            //  setTimeout(()=>{
            //    resolve('success')
            //  },1000)
            throw 'ERR'
            throw 'EEEEE'
         })
         const result =  objectTest.then((val)=>{
             return new Promise((resolve,reject)=>{
               console.log(111)
                resolve('success!')
                return 22
             })
         },(reson)=>{
            return new Promise((resolve,reject)=>{
             let rr =  reject('err!')
             })
         }).catch((e)=>{
            console.log(e)
         })
         console.log(objectTest,'66')
         console.log(result,'22')


         let p1 = new Promise((resolve, reject) => {
            resolve('成功了')
         })

         let p2 = new Promise((resolve, reject) => {
            resolve('success')
         })

         let p3 = Promise.reject('失败')

         Promise.all([p1, p2]).then((result) => {
            console.log(result)               //['成功了', 'success']
         }).catch((error) => {
            console.log(error)
         })
    </script>
</body>
</html>
